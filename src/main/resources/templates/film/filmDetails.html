<!DOCTYPE html>
<html xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
    <meta charset="UTF-8">
    <title>Film details</title>
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
</head>
<body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js">
</script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#locales").change(function () {
            var selectedOption = $('#locales').val();
            if (selectedOption != ''){
                let index = window.location.href.indexOf('&');
                //alert('Index = ' + index);
                let url;
                if(index > 0) {
                    url = window.location.href.substring(0, index);
                    //alert('url = ' + url);
                    window.location.href = url + '&lang=' + selectedOption;
                    //alert('window.location.href 2 = ' + window.location.href);
                }
                else {
                    url = window.location.href;
                }
                window.location.href = url + '&lang=' + selectedOption;
                //alert('window.location.href = ' + window.location.href);
            }
        });
    });
</script>
<span th:text="#{lang.change}"></span>:
<select id="locales">
    <option value=""></option>
    <option value="en" th:text="#{lang.en}"></option>
    <option value="hr" th:text="#{lang.hr}"></option>
    <option value="ar" th:text="#{lang.ar}"></option>
</select>

    <div th:if="${film != null}">
        <h1><span th:text="${film.name}" >FILM.NAME</span></h1>
        <table>
            <tr>
                <td th:text="#{film.name} + ': '"></td>
                <td th:text="${film.name}" />
            </tr>
            <tr>
                <td th:text="#{film.director} + ': '"></td>
                <td th:text="${film.director}" />
            </tr>
            <tr>
                <td th:text="#{film.genre} + ': '"></td>
                <td th:text="${film.genre}" />
            </tr>
            <tr>
                <td th:text="#{film.duration} + ': '"></td>
                <td th:text="${film.duration}" />
            </tr>
            <tr>
                <td th:text="#{film.rating} + ': '"></td>
                <td th:text="${film.rating}" />
            </tr>
        </table>
    </div>
    <div sec:authorize="hasAuthority('ROLE_ADMIN')">
        <a th:href="${'/film/update/?id=' + film.id}" class="btn btn-success"> <i class="fa fa-arrow-circle-o-left"></i>&nbsp;Ažuriraj film</a>
        <a th:href="${'/film/delete/?id=' + film.id}" class="btn btn-success"> <i class="fa fa-arrow-circle-o-left"></i>&nbsp;Obriši film</a>
    </div>
    <a href="/film" class="btn btn-success"> <i class="fa fa-arrow-circle-o-left"></i>&nbsp;Povratak na listu filmova</a>
</body>
</html>